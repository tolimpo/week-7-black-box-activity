(()=>{"use strict";var t={974:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ActionKeys=void 0,function(t){t.CLEAR="C",t.EQUALS="=",t.DOT="."}(r||(e.ActionKeys=r={}))},542:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorKeys=e.NumericKeys=e.ActionKeys=void 0;var s=r(974);Object.defineProperty(e,"ActionKeys",{enumerable:!0,get:function(){return s.ActionKeys}});var a=r(166);Object.defineProperty(e,"NumericKeys",{enumerable:!0,get:function(){return a.NumericKeys}});var i=r(482);Object.defineProperty(e,"OperatorKeys",{enumerable:!0,get:function(){return i.OperatorKeys}})},166:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.NumericKeys=void 0,function(t){t.ZERO="0",t.ONE="1",t.TWO="2",t.THREE="3",t.FOUR="4",t.FIVE="5",t.SIX="6",t.SEVEN="7",t.EIGHT="8",t.NINE="9"}(r||(e.NumericKeys=r={}))},482:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorKeys=void 0,function(t){t.PLUS="+",t.MINUS="-",t.MULT="*",t.DIV="/"}(r||(e.OperatorKeys=r={}))},823:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CalculatorModel=void 0;const s=r(974),a=r(866),i=r(641);e.CalculatorModel=class{constructor(){this._observers=[],this._state=new a.EnteringFirstNumberState(this,(new i.StateData.Builder).build())}attach(t){this._observers.push(t)}detach(t){this._observers=this._observers.filter((e=>e!==t))}notify(t){this._observers.forEach((e=>e.update(t)))}changeState(t){this._state=t}pressNumericKey(t){this._state.digit(t)}pressOperatorKey(t){this._state.binaryOperator(t)}pressActionKey(t){switch(t){case s.ActionKeys.CLEAR:this._state.clear();break;case s.ActionKeys.DOT:this._state.decimalSeparator();break;case s.ActionKeys.EQUALS:this._state.equals();break;default:throw new Error("Invalid Action")}}display(){return this._state.display()}}},641:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StateData=void 0;class r{constructor(t,e,r,s,a){this._firstBuffer=t,this._secondBuffer=e,this._thirdBuffer=r,this._firstOperator=s,this._secondOperator=a}get firstBuffer(){return this._firstBuffer}get secondBuffer(){return this._secondBuffer}get thirdBuffer(){return this._thirdBuffer}get firstOperator(){return this._firstOperator}get secondOperator(){return this._secondOperator}set firstBuffer(t){this._firstBuffer=t}set secondBuffer(t){this._secondBuffer=t}set thirdBuffer(t){this._thirdBuffer=t}set firstOperator(t){this._firstOperator=t}set secondOperator(t){this._secondOperator=t}display(){return`${this._firstBuffer}${this._firstOperator}${this._secondBuffer}${this._secondOperator}${this._thirdBuffer}`}}e.StateData=r,r.Builder=class{constructor(){this._firstBuffer="",this._secondBuffer="",this._thirdBuffer="",this._firstOperator="",this._secondOperator=""}withFirstBuffer(t){return this._firstBuffer=t,this}withSecondBuffer(t){return this._secondBuffer=t,this}withThirdBuffer(t){return this._thirdBuffer=t,this}withFirstOperator(t){return this._firstOperator=t,this}withSecondOperator(t){return this._secondOperator=t,this}build(){return new r(this._firstBuffer,this._secondBuffer,this._thirdBuffer,this._firstOperator,this._secondOperator)}}},174:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractCalculatorState=void 0;const s=r(641),a=r(866);e.AbstractCalculatorState=class{constructor(t,e){this._context=t,this._data=e}display(){return this._data.display()}clear(){this._context.changeState(new a.EnteringFirstNumberState(this._context,(new s.StateData.Builder).build()))}add(t,e){const r=t+e;return this._context.notify(`${t} + ${e} = ${r}`),r}subtract(t,e){const r=t-e;return this._context.notify(`${t} - ${e} = ${r}`),r}multiply(t,e){const r=t*e;return this._context.notify(`${t} * ${e} = ${r}`),r}divide(t,e){const r=t/e;return this._context.notify(`${t} / ${e} = ${r}`),r}}},866:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EnteringFirstNumberState=void 0;const s=r(641),a=r(711),i=r(174);class o extends i.AbstractCalculatorState{constructor(t,e){super(t,e)}digit(t){this._data.firstBuffer="0"===this._data.firstBuffer&&"0"!==t?t:this._data.firstBuffer+t}decimalSeparator(){-1===this._data.firstBuffer.indexOf(".")&&(this._data.firstBuffer=".")}binaryOperator(t){const e=(new s.StateData.Builder).withFirstBuffer(""===this._data.firstBuffer?"0":this._data.firstBuffer).withFirstOperator(t).build();this._context.changeState(new a.EnteringSecondNumberState(this._context,e))}equals(){this._context.changeState(this)}}e.EnteringFirstNumberState=o},711:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EnteringSecondNumberState=void 0;const s=r(482),a=r(641),i=r(174),o=r(866),n=r(341),c=r(874);class h extends i.AbstractCalculatorState{constructor(t,e){super(t,e)}digit(t){this._data.secondBuffer="0"===this._data.secondBuffer&&"0"!==t?t:this._data.secondBuffer+t}decimalSeparator(){-1===this._data.secondBuffer.indexOf(".")&&(this._data.secondBuffer+=".")}binaryOperator(t){switch(t){case s.OperatorKeys.PLUS:case s.OperatorKeys.MINUS:this.evaluateWhenLowPrecedenceNext(t);break;case s.OperatorKeys.DIV:case s.OperatorKeys.MULT:this.evaluateWhenHighPrecedenceNext(t);break;default:throw new Error("Invalid Operator")}}equals(){const t=parseFloat(""===this._data.firstBuffer?"0":this._data.firstBuffer),e=parseFloat(""===this._data.secondBuffer?"0":this._data.secondBuffer);switch(this._data.firstOperator){case s.OperatorKeys.PLUS:this._context.changeState(new o.EnteringFirstNumberState(this._context,(new a.StateData.Builder).withFirstBuffer(this.add(t,e).toString()).build()));break;case s.OperatorKeys.MINUS:this._context.changeState(new o.EnteringFirstNumberState(this._context,(new a.StateData.Builder).withFirstBuffer(this.subtract(t,e).toString()).build()));break;case s.OperatorKeys.MULT:this._context.changeState(new o.EnteringFirstNumberState(this._context,(new a.StateData.Builder).withFirstBuffer(this.multiply(t,e).toString()).build()));break;case s.OperatorKeys.DIV:this._context.changeState(new o.EnteringFirstNumberState(this._context,(new a.StateData.Builder).withFirstBuffer(this.divide(t,e).toString()).build()));break;default:this._context.changeState(new c.ErrorState(this._context,this._data))}}evaluateWhenLowPrecedenceNext(t){const e=parseFloat(""===this._data.firstBuffer?"0":this._data.firstBuffer),r=parseFloat(""===this._data.secondBuffer?"0":this._data.secondBuffer);switch(this._data.firstOperator){case s.OperatorKeys.PLUS:this._data.firstBuffer=this.add(e,r).toString();break;case s.OperatorKeys.MINUS:this._data.firstBuffer=this.subtract(e,r).toString();break;case s.OperatorKeys.MULT:this._data.firstBuffer=this.multiply(e,r).toString();break;case s.OperatorKeys.DIV:0!==r?this._data.firstBuffer=this.divide(e,r).toString():this._context.changeState(new c.ErrorState(this._context,this._data));break;default:this._context.changeState(new c.ErrorState(this._context,this._data))}this._data.secondBuffer="",this._data.firstOperator=t}evaluateWhenHighPrecedenceNext(t){const e=parseFloat(""===this._data.firstBuffer?"0":this._data.firstBuffer),r=parseFloat(""===this._data.secondBuffer?"0":this._data.secondBuffer);switch(this._data.firstOperator){case s.OperatorKeys.MULT:this._data.firstBuffer=this.multiply(e,r).toString(),this._data.secondBuffer="",this._data.firstOperator=t;break;case s.OperatorKeys.DIV:0===r?this._context.changeState(new c.ErrorState(this._context,this._data)):(this._data.firstBuffer=this.divide(e,r).toString(),this._data.secondBuffer="",this._data.firstOperator=t);break;case s.OperatorKeys.PLUS:case s.OperatorKeys.MINUS:const i=(new a.StateData.Builder).withFirstBuffer(this._data.firstBuffer).withSecondBuffer(this._data.secondBuffer).withFirstOperator(this._data.firstOperator).withSecondOperator(t).build();this._context.changeState(new n.EnteringThirdNumberState(this._context,i));break;default:this._context.changeState(new c.ErrorState(this._context,this._data))}}}e.EnteringSecondNumberState=h},341:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EnteringThirdNumberState=void 0;const s=r(482),a=r(641),i=r(174),o=r(866),n=r(711),c=r(874);class h extends i.AbstractCalculatorState{constructor(t,e){super(t,e)}digit(t){this._data.thirdBuffer="0"===this._data.thirdBuffer&&"0"!==t?t:this._data.thirdBuffer+t}decimalSeparator(){-1===this._data.thirdBuffer.indexOf(".")&&(this._data.thirdBuffer+=".")}binaryOperator(t){const e=parseFloat(""===this._data.secondBuffer?"0":this._data.secondBuffer),r=parseFloat(""===this._data.thirdBuffer?"0":this._data.thirdBuffer);switch(t){case s.OperatorKeys.MULT:case s.OperatorKeys.DIV:if(t===s.OperatorKeys.DIV&&0===r)this._context.changeState(new c.ErrorState(this._context,this._data));else{switch(this._data.secondOperator){case s.OperatorKeys.MULT:this._data.secondBuffer=this.multiply(e,r).toString(),this._data.thirdBuffer="";break;case s.OperatorKeys.DIV:this._data.secondBuffer=this.divide(e,r).toString(),this._data.thirdBuffer=""}this._data.secondOperator=t}break;case s.OperatorKeys.PLUS:case s.OperatorKeys.MINUS:this.evaluateWhenLowPrecedenceNext(t);break;default:this._context.changeState(new c.ErrorState(this._context,this._data))}}equals(){const t=parseFloat(""===this._data.firstBuffer?"0":this._data.firstBuffer),e=parseFloat(""===this._data.secondBuffer?"0":this._data.secondBuffer),r=parseFloat(""===this._data.thirdBuffer?"0":this._data.thirdBuffer);let i;if(this._data.secondOperator===s.OperatorKeys.MULT)i=parseFloat(this.multiply(e,r).toString());else{if(0===r)return void this._context.changeState(new c.ErrorState(this._context,this._data));i=parseFloat(this.divide(e,r).toString())}this._data.firstOperator===s.OperatorKeys.PLUS?this._context.changeState(new o.EnteringFirstNumberState(this._context,(new a.StateData.Builder).withFirstBuffer(this.add(t,i).toString()).build())):this._context.changeState(new o.EnteringFirstNumberState(this._context,(new a.StateData.Builder).withFirstBuffer(this.subtract(t,i).toString()).build()))}evaluateWhenLowPrecedenceNext(t){const e=parseFloat(""===this._data.firstBuffer?"0":this._data.firstBuffer),r=parseFloat(""===this._data.secondBuffer?"0":this._data.secondBuffer),i=parseFloat(""===this._data.thirdBuffer?"0":this._data.thirdBuffer);let o,h;switch(this._data.secondOperator){case s.OperatorKeys.MULT:o=this.multiply(r,i),o=this._data.firstOperator===s.OperatorKeys.PLUS?this.add(e,o):this.subtract(e,o),h=(new a.StateData.Builder).withFirstBuffer(o.toString()).withFirstOperator(t).build(),this._context.changeState(new n.EnteringSecondNumberState(this._context,h));break;case s.OperatorKeys.DIV:0!==i?(o=this.divide(r,i),o=this._data.firstOperator===s.OperatorKeys.PLUS?this.add(e,o):this.subtract(e,o),h=(new a.StateData.Builder).withFirstBuffer(o.toString()).withFirstOperator(t).build(),this._context.changeState(new n.EnteringSecondNumberState(this._context,h))):this._context.changeState(new c.ErrorState(this._context,this._data));break;default:this._context.changeState(new c.ErrorState(this._context,this._data))}}}e.EnteringThirdNumberState=h},874:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorState=void 0;const s=r(641),a=r(866);class i{constructor(t,e){this._context=t,this._data=e}digit(t){const e=(new s.StateData.Builder).withFirstBuffer(t).build();this._context.changeState(new a.EnteringFirstNumberState(this._context,e))}decimalSeparator(){const t=(new s.StateData.Builder).withFirstBuffer("0.").build();this._context.changeState(new a.EnteringFirstNumberState(this._context,t))}binaryOperator(){this._context.changeState(new i(this._context,this._data))}equals(){this._context.changeState(new i(this._context,this._data))}clear(){this._context.changeState(new a.EnteringFirstNumberState(this._context,(new s.StateData.Builder).build()))}display(){return"ERR"}}e.ErrorState=i}},e={};function r(s){var a=e[s];if(void 0!==a)return a.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,r),i.exports}var s={};(()=>{var t=s;t.Calculator=void 0;const e=r(542),a=r(823);t.Calculator=class{constructor(){this.calculatorModel=new a.CalculatorModel}pressOne(){this.calculatorModel.pressNumericKey(e.NumericKeys.ONE)}pressTwo(){this.calculatorModel.pressNumericKey(e.NumericKeys.TWO)}pressThree(){this.calculatorModel.pressNumericKey(e.NumericKeys.THREE)}pressFour(){this.calculatorModel.pressNumericKey(e.NumericKeys.FOUR)}pressFive(){this.calculatorModel.pressNumericKey(e.NumericKeys.FIVE)}pressSix(){this.calculatorModel.pressNumericKey(e.NumericKeys.SIX)}pressSeven(){this.calculatorModel.pressNumericKey(e.NumericKeys.SEVEN)}pressEight(){this.calculatorModel.pressNumericKey(e.NumericKeys.EIGHT)}pressNine(){this.calculatorModel.pressNumericKey(e.NumericKeys.NINE)}pressZero(){this.calculatorModel.pressNumericKey(e.NumericKeys.ZERO)}pressPlus(){this.calculatorModel.pressOperatorKey(e.OperatorKeys.PLUS)}pressMinus(){this.calculatorModel.pressOperatorKey(e.OperatorKeys.MINUS)}pressMult(){this.calculatorModel.pressOperatorKey(e.OperatorKeys.MULT)}pressDiv(){this.calculatorModel.pressOperatorKey(e.OperatorKeys.DIV)}pressDot(){this.calculatorModel.pressActionKey(e.ActionKeys.DOT)}pressClear(){this.calculatorModel.pressActionKey(e.ActionKeys.CLEAR)}pressEquals(){this.calculatorModel.pressActionKey(e.ActionKeys.EQUALS)}display(){return this.calculatorModel.display()}}})(),module.exports=s.Calculator})();